// Import via API
const readings = [
  { date: '2024-10-21', value: 266, notes: 'Start' },
  { date: '2024-10-22', value: 289 },
  { date: '2024-10-23', value: 311 },
  { date: '2024-10-24', value: 333 },
  { date: '2024-10-25', value: 356 },
  { date: '2024-10-26', value: 378 },
  { date: '2024-10-27', value: 401 },
  { date: '2024-10-28', value: 423 },
  { date: '2024-10-29', value: 446 },
  { date: '2024-10-30', value: 469 },
  { date: '2024-10-31', value: 491 },
  { date: '2024-11-01', value: 514 },
  { date: '2024-11-02', value: 537 },
  { date: '2024-11-03', value: 559 },
  { date: '2024-11-04', value: 582 },
  { date: '2024-11-05', value: 605 },
  { date: '2024-11-06', value: 627 },
  { date: '2024-11-07', value: 650 },
  { date: '2024-11-08', value: 673 },
  { date: '2024-11-09', value: 696 },
  { date: '2024-11-10', value: 719 },
  { date: '2024-11-11', value: 742 },
  { date: '2024-11-12', value: 765 },
  { date: '2024-11-13', value: 788 },
  { date: '2024-11-14', value: 811 },
  { date: '2024-11-15', value: 834 },
  { date: '2024-11-16', value: 858 },
  { date: '2024-11-17', value: 881 },
  { date: '2024-11-18', value: 905 },
  { date: '2024-11-19', value: 929 },
  { date: '2024-11-20', value: 953 },
  { date: '2024-11-21', value: 978, notes: 'kalt, Heizstab' },
  { date: '2024-11-22', value: 1036, notes: 'kalt, Heizstab' },
  { date: '2024-11-23', value: 1094, notes: 'kalt, Heizstab' },
  { date: '2024-11-24', value: 1153, notes: 'kalt, Heizstab' },
  { date: '2024-11-25', value: 1212, notes: 'kalt' },
  { date: '2024-11-26', value: 1271 },
  { date: '2024-11-27', value: 1331 },
  { date: '2024-11-28', value: 1391 },
  { date: '2024-11-29', value: 1452 },
  { date: '2024-11-30', value: 1513 },
  { date: '2024-12-01', value: 1575 },
  { date: '2024-12-02', value: 1637 },
  { date: '2024-12-03', value: 1700 },
  { date: '2024-12-04', value: 1764 },
  { date: '2024-12-05', value: 1828 },
  { date: '2024-12-06', value: 1892 },
  { date: '2024-12-07', value: 1957 },
  { date: '2024-12-08', value: 2023 },
  { date: '2024-12-09', value: 2089 },
  { date: '2024-12-10', value: 2155 },
  { date: '2024-12-11', value: 2222 },
  { date: '2024-12-12', value: 2290 },
  { date: '2024-12-13', value: 2358 },
  { date: '2024-12-14', value: 2426 },
  { date: '2024-12-15', value: 2495 },
  { date: '2024-12-16', value: 2564 },
  { date: '2024-12-17', value: 2634 },
  { date: '2024-12-18', value: 2704 },
  { date: '2024-12-19', value: 2775 },
  { date: '2024-12-20', value: 2846 },
  { date: '2024-12-21', value: 2918 },
  { date: '2024-12-22', value: 2990 },
  { date: '2024-12-23', value: 3063 },
  { date: '2024-12-24', value: 3136 },
  { date: '2024-12-25', value: 3210 },
  { date: '2024-12-26', value: 3284 },
  { date: '2024-12-27', value: 3359 },
  { date: '2024-12-28', value: 3434 },
  { date: '2024-12-29', value: 3510 },
  { date: '2024-12-30', value: 3586 },
  { date: '2024-12-31', value: 3663 },
  { date: '2025-01-01', value: 3740 },
  { date: '2025-01-02', value: 3818 },
  { date: '2025-01-03', value: 3896 },
  { date: '2025-01-04', value: 3975 },
  { date: '2025-01-05', value: 4054 },
  { date: '2025-01-06', value: 4134 },
  { date: '2025-01-07', value: 4214 },
  { date: '2025-01-08', value: 4295 },
  { date: '2025-01-09', value: 4376 },
  { date: '2025-01-10', value: 4458 },
  { date: '2025-01-11', value: 4540 },
  { date: '2025-01-12', value: 4623 },
  { date: '2025-01-13', value: 4706 },
  { date: '2025-01-14', value: 4790 },
  { date: '2025-01-15', value: 4874 },
  { date: '2025-01-16', value: 4959 },
  { date: '2025-01-17', value: 5044 },
  { date: '2025-01-18', value: 5130 },
  { date: '2025-01-19', value: 5216 },
  { date: '2025-01-20', value: 5303 },
  { date: '2025-01-21', value: 5390 },
  { date: '2025-01-22', value: 5478 },
  { date: '2025-01-23', value: 5567, notes: 'ZP aus' },
  { date: '2025-01-24', value: 5628 },
  { date: '2025-01-25', value: 5689 },
  { date: '2025-01-26', value: 5750 },
  { date: '2025-01-27', value: 5812 },
  { date: '2025-01-28', value: 5874 },
  { date: '2025-01-29', value: 5936 },
  { date: '2025-01-30', value: 5999 },
  { date: '2025-01-31', value: 6062 },
  { date: '2025-02-01', value: 6126 },
  { date: '2025-02-02', value: 6190 },
  { date: '2025-02-03', value: 6254 },
  { date: '2025-02-04', value: 6319 },
  { date: '2025-02-05', value: 6384 },
  { date: '2025-02-06', value: 6450 },
  { date: '2025-02-07', value: 6516 },
  { date: '2025-02-08', value: 6583 },
  { date: '2025-02-09', value: 6650 },
  { date: '2025-02-10', value: 6717 },
  { date: '2025-02-11', value: 6785 },
  { date: '2025-02-12', value: 6853 },
  { date: '2025-02-13', value: 6922 },
  { date: '2025-02-14', value: 6991 },
  { date: '2025-02-15', value: 7060 },
  { date: '2025-02-16', value: 7130 },
  { date: '2025-02-17', value: 7200 },
  { date: '2025-02-18', value: 7271 },
  { date: '2025-02-19', value: 7342 },
  { date: '2025-02-20', value: 7413 },
  { date: '2025-02-21', value: 7485 },
  { date: '2025-02-22', value: 7557 },
  { date: '2025-02-23', value: 7630 },
  { date: '2025-02-24', value: 7703 },
  { date: '2025-02-25', value: 7776 },
  { date: '2025-02-26', value: 7850 },
  { date: '2025-02-27', value: 7924 },
  { date: '2025-02-28', value: 7999 },
  { date: '2025-03-01', value: 8052 },
  { date: '2025-03-02', value: 8105 },
  { date: '2025-03-03', value: 8159 },
  { date: '2025-03-04', value: 8213 },
  { date: '2025-03-05', value: 8267 },
  { date: '2025-03-06', value: 8321 },
  { date: '2025-03-07', value: 8376 },
  { date: '2025-03-08', value: 8431 },
  { date: '2025-03-09', value: 8486 },
  { date: '2025-03-10', value: 8542 },
  { date: '2025-03-11', value: 8598 },
  { date: '2025-03-12', value: 8654 },
  { date: '2025-03-13', value: 8711 },
  { date: '2025-03-14', value: 8768 },
  { date: '2025-03-15', value: 8825 },
  { date: '2025-03-16', value: 8883 },
  { date: '2025-03-17', value: 8941 },
  { date: '2025-03-18', value: 8999 },
  { date: '2025-03-19', value: 9058 },
  { date: '2025-03-20', value: 9083 },
  { date: '2025-03-21', value: 9108 },
  { date: '2025-03-22', value: 9133 },
  { date: '2025-03-23', value: 9158 },
  { date: '2025-03-24', value: 9184 },
  { date: '2025-03-25', value: 9210 },
  { date: '2025-03-26', value: 9236 },
  { date: '2025-03-27', value: 9262 },
  { date: '2025-03-28', value: 9288 },
  { date: '2025-03-29', value: 9315 },
  { date: '2025-03-30', value: 9342 },
  { date: '2025-03-31', value: 9369 },
  { date: '2025-04-01', value: 9383 },
  { date: '2025-04-02', value: 9397 },
  { date: '2025-04-03', value: 9411 },
  { date: '2025-04-04', value: 9425 },
  { date: '2025-04-05', value: 9439 },
  { date: '2025-04-06', value: 9454 },
  { date: '2025-11-20', value: 9483 },
];

const API = 'http://localhost:3001';

async function importAll() {
  // First delete all existing readings
  const existing = await fetch(API + '/api/readings').then(r => r.json());
  console.log('Deleting ' + existing.length + ' existing readings...');
  for (const r of existing) {
    await fetch(API + '/api/readings/' + r.id, { method: 'DELETE' });
  }

  console.log('Importing ' + readings.length + ' readings...');
  for (const r of readings) {
    const timestamp = new Date(r.date + 'T08:00:00').toISOString();
    await fetch(API + '/api/readings', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        timestamp,
        meterValue: r.value,
        unit: 'kWh',
        source: 'import',
        notes: r.notes || undefined,
        synced: true,
      }),
    });
    process.stdout.write('.');
  }
  console.log('\nDone!');
}

importAll().catch(console.error);
